; PlatformIO Project Configuration File
;
; Proyecto: LoRa Heltec V4 - Codigo Limpio
;
; Para compilar:
;   pio run -e heltec_v4_tx      ; Compilar transmisor
;   pio run -e heltec_v4_rx      ; Compilar receptor
;   pio run -e heltec_v4_rx_irq  ; Compilar receptor con IRQ
;
; Para cargar:
;   pio run -e heltec_v4_tx -t upload

[platformio]
default_envs = heltec_v4_tx

; ============================================================================
; CONFIGURACION COMUN
; ============================================================================

[env]
platform = espressif32@6.4.0
framework = arduino
board = heltec_wifi_lora_32_V3  ; Compatible con V4

; Velocidad del monitor serial
monitor_speed = 115200

; Libreria RadioLib para manejo del SX1262
lib_deps =
    jgromes/RadioLib@^6.4.0

; Configuracion de compilacion
build_flags =
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DCORE_DEBUG_LEVEL=3

; Configuracion de memoria (16MB flash del Heltec V4)
board_build.partitions = default_16MB.csv
board_build.flash_mode = dio
board_build.f_flash = 80000000L

; Filtro del monitor serial
monitor_filters = esp32_exception_decoder

; ============================================================================
; ENTORNO: TRANSMISOR
; ============================================================================

[env:heltec_v4_tx]
build_src_filter =
    +<*>
    +<../examples/transmisor/>

; ============================================================================
; ENTORNO: RECEPTOR
; ============================================================================

[env:heltec_v4_rx]
build_src_filter =
    +<*>
    +<../examples/receptor/>

; ============================================================================
; ENTORNO: RECEPTOR CON INTERRUPCIONES
; ============================================================================

[env:heltec_v4_rx_irq]
build_src_filter =
    +<*>
    +<../examples/receptor_irq/>
